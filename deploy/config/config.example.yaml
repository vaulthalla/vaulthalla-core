# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                  VAULTHALLA CONFIGURATION
#                âš”ï¸  FINAL FORGED EDITION âš”ï¸
#     A self-hosted empire demands no less than glory
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# === ğŸ§  CORE SERVER SETTINGS ===
server:
  host: 0.0.0.0                     # Bind address for API/WebSocket daemon
  port: 36969                       # Main API listener port
  uds_socket: /tmp/vaulthalla.sock  # Unix domain socket for internal IPC
  log_level: info                   # debug | info | warn | error
  max_connections: 1024             # Max concurrent API connections

# === ğŸª“ FUSE MOUNT SETTINGS ===
fuse:
  enabled: true                     # Mounting enabled
  root_mount_path: /mnt/vaulthalla  # Base mountpoint for all volumes
  mount_per_user: true              # Isolate each user's mount
  fuse_timeout_seconds: 60          # Idle timeout for auto-unmount
  allow_other: true                 # Allow access by non-calling users (e.g. Nextcloud)

# === Caching & Previews ===
caching:
  path: ".cache"               # Local cache directory (relative to root_mount_path)
  max_size_mb: 10240           # Max size for full-size cache (10 GB)

  # Cloud caching settings
  cloud:
    thumbnails: true
    full_size: true
    documents:
      pdf: true
  # Local caching settings
  local:
    thumbnails: true
    documents:
      pdf: true

  # Cloud preview settings
  cloud_preview:
    expiry_days: 7
    mirror: true               # Mirror full-size files to local storage, false = on demand caching of cloud files

  # Thumbnail settings
  thumbnails:
    formats: [jpg, jpeg, png, webp, pdf]
    sizes: [128, 256, 512]                    # Thumbnail sizes in pixels
    expiry_days: 30

  # Document previews
  previews:
    # General document preview settings
    documents:
      # PDF preview settings
      pdf:
        max_pages: 0                  # Max pages to generate previews for (0 = all)
        expiry_days: 15               # How long to keep PDF previews

# === ğŸ˜ DATABASE SETTINGS ===
database:
  host: localhost              # PostgreSQL host
  port: 5432                   # PostgreSQL port
  name: vaulthalla             # Database name
  user: vaulthalla             # Database user
  # ğŸ” Override the password field with VAULTHALLA_DB_PASSWORD env var
  password: changeme
  pool_size: 10                # Max DB connection pool size

# === ğŸ” AUTHENTICATION SETTINGS ===
auth:
  token_expiry_minutes: 60          # JWT access token TTL
  refresh_token_expiry_days: 7      # Refresh token TTL
  jwt_secret: changeme-very-secret  # ğŸ” Override with VAULTHALLA_JWT_SECRET
  allow_signup: false               # Enable/disable open registration

# === ğŸ“Š METRICS / MONITORING ===
metrics:
  enabled: true                # Enable Prometheus metrics
  port: 9100                   # Metrics endpoint port

# === ğŸ›¡ï¸ ADMIN UI / DASHBOARD ===
admin_ui:
  enabled: true                # Enable embedded UI
  bind_port: 9090              # Port to serve UI
  allowed_ips:                 # Whitelisted IPs for access
    - 127.0.0.1
    - "::1"

# === ğŸ§¼ BACKGROUND TASKS ===
scheduler:
  cleanup_interval_hours: 24   # Cleanup cycle frequency
  audit_prune_days: 90         # Audit log TTL
  usage_refresh_minutes: 10    # How often to refresh user usage stats

# === âš™ï¸ ADVANCED FEATURES ===
advanced:
  enable_file_versioning: true      # Keep past versions
  max_upload_size_mb: 2048          # Upload limit per file
  enable_sharing: true              # Allow internal file sharing
  enable_public_links: true         # Allow external share links
  rate_limit_per_ip_per_minute: 60  # API request limiter
  dev_mode: false                   # Enable development features (not for production)
